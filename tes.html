<!DOCTYPE html>
<html>
<head>
<title>Aplication Load Balancer</title>
</head>
<body>


<p>Application Load Balancer with 4 EC2<br>
2 EC2 serving /<br>
2 EC2 serving /image<br>
<br>
1. Create EC2 #1<br>
   * Number of Instances: 2<br>
   * Advanced Details: Enter user data as in https://bit.ly/EC2UserData<br>
   * Security Group: make sure port 80 (HTTP) is available<br>
   * Open EC2 Public IPv4 address and make sure on every instance that they match their public IP address<br>
   * Tag: Name:IP<br>
   * Check by opening the public IP4. It should display a blank page with their IP address written<br>
<br>   
2. Create EC2 #2<br>
   * Number of Instances: 2<br>
   * Advanced Details: Enter user data as in https://bit.ly/EC2ImageTargetGroup<br>
   * Security Group: make sure port 80 (HTTP) is available<br>
   * Open EC2 Public IPv4 address and make sure on every instance that they match their public IP address<br>
   * Tag: Name:Image<br>
   * Check by opening the public IP4 with /image path. It should display an AWS image<br>
<br>
3. Create Target Group #1<br>
   * Target Type: Instances<br>
   * Target Group Name: IP<br>
   * Health Check Path: /index.html<br>
   * Healthy threshold: 2<br>
   * Unhealthy threshold: 2<br>
   * Timeout: 2<br>
   * Interval: 5<br>
   * Add 2 EC2 with name "IP" into Target (click on "include as pending below")<br>
   <br>
4. Create Target Group #2<br>
   * Target Type: Instances<br>
   * Target Group Name: Image<br>
   * Health Check Path: /image/index.html<br>
   * Healthy threshold: 2<br>
   * Unhealthy threshold: 2<br>
   * Timeout: 2<br>
   * Interval: 5<br>
   * Add 2 EC2 with name "Image" into Target (click on "include as pending below")<br>
   <br>
5. Create Application Load Balancer<br>
   * Name: MyELB<br>
   * Scheme: Internet-facing<br>
   * Availability Zones: select ALL *US-East-1[a-f]<br>
   * Pick the Security Group that you created earlier<br>
   * Configure Routing<br>
      - Target Group: Existing Target Group (IP)<br>
   * Health Checks<br>
      - Protocol TCP<br>
      - Path : /index.html<br>
      - Healthy threshold: 2<br>
      - Unhealthy threshold: 2<br>
      - Timeout: 2<br>
      - Interval: 5<br>
    * Create Load Balancer<br>
<br>
6. Add rules<br>
    * Click on ELB setting<br>
    * Click on Listeners tab<br>
    * Click on View/edit rules<br>
    * Click + sign, insert Rule<br>
       - Condition: Path: /image/<br>
       - Add action: Forward to -> Target Group Image<br>
       - Save<br>
    <br>
7. Test your new Path-based routing using ELB<br>
</p>

</body>
</html>
